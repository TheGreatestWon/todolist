# 도메인 정의서 (Domain Definition)

## 1. 도메인 핵심 정의 (Core Domain)


### 1.1 프로젝트 범위 및 일정
- MVP출시 목표 일정은 언제인가요? 이번주 금요일 오후
- MVP에 반드시 포함되어야 할 핵심 기능은 무엇인가요?
 (회원등록, 로그인, 할일추가, 수정, 삭제, 완료처리:로그인한 사용자만 사용 가능함)
- 개발일정은 대략 3일이야.

### 1.2 본질적 문제
개인 사용자는 매일 여러 할 일을 생성하지만,
현재 시점에서 **무엇을 지금 해야 하는지**, **이미 늦은 일은 무엇인지**,
**완료한 일과 아직 남은 일을 명확히 구분**하지 못한다.

특히 개인 데이터가 안전하게 분리된 상태에서
**마감일과 상태 중심으로 사고할 수 있는 일정 관리 도구**가 필요하다.

---

### 1.3 도메인 중심
**Personal Todo Management** 도메인은
> 인증된 개인 사용자가 자신의 할 일을 생성하고,
> 상태와 시간의 흐름에 따라 자연스럽게 정리·추적·완료하도록 돕는 도메인이다.

이 도메인의 핵심 가치는 다음 세 가지다:
- 개인별 데이터 격리
- 상태 기반 인지 (미완료 / 완료 / 기한 경과)
- 시간 흐름 기반 판단 (오늘, 예정, 지연)

---

## 2. 도메인 범위 (Bounded Context)

### 2.1 포함 (In Scope)
- 사용자 계정 등록 및 인증
- 인증된 사용자 기반 접근 제어
- 할 일(Todo) 생명주기 관리
  - 생성, 수정, 삭제
  - 완료 / 미완료 전환
- 마감일(Due Date) 관리
- 기한 경과(Overdue) 자동 판단
- 상태 및 시간 기준 분류

---

### 2.2 제외 (Out of Scope)
- 할 일 공유 및 협업
- 카테고리, 태그, 우선순위 레벨
- 반복 일정
- 알림, 푸시, 리마인더
- 댓글, 첨부파일
- 통계, 분석 기능

---

## 3. Ubiquitous Language (공통 언어)

### User (사용자)
시스템에 등록된 개인 사용자로, 자신의 할 일 목록을 소유한다.

### Authenticated User (인증된 사용자)
인증을 완료하여 할 일 관리 기능을 사용할 수 있는 사용자.

### Todo (할 일)
사용자가 수행해야 하는 단일 작업 단위.

### Due Date (마감일)
할 일을 완료해야 하는 목표 날짜.

### Completion Status (완료 상태)
할 일의 수행 여부를 나타내는 상태.
- Incomplete
- Completed

### Overdue (기한 경과)
마감일이 지났고 아직 완료되지 않은 상태적 특성.

### Ownership (소유권)
사용자가 자신이 생성한 Todo에 대해 가지는 배타적 권한.

---

## 4. Aggregate 및 관계

### 4.1 Aggregate 구성
이 도메인은 두 개의 독립적인 Aggregate로 구성된다.

- User Aggregate
- Todo Aggregate

각 Aggregate는 독립적인 트랜잭션 경계를 가진다.

---

### 4.2 User Aggregate

**Aggregate Root:** User

**역할**
- 사용자 식별 기준
- 인증의 기준 주체
- Todo 소유권의 기준

**규칙**
- User는 Todo를 직접 포함하지 않는다.
- Todo는 UserId만 참조한다.

---

### 4.3 Todo Aggregate

**Aggregate Root:** Todo

**역할**
- 할 일의 생명주기 관리
- 상태 전이 관리
- 마감일 기준 판단의 주체

**규칙**
- Todo는 반드시 하나의 User에 소유된다.
- User 객체를 직접 참조하지 않는다.

---

### 4.4 관계 규칙
- User : Todo = 1 : N
- Todo는 반드시 유효한 UserId를 가진다.
- User 삭제 시 해당 User의 Todo는 함께 삭제된다.

---

## 5. 엔티티 책임과 불변식

### 5.1 User

**책임**
- 사용자 식별자 유지
- 인증 정보 보유
- 시스템 접근 권한의 기준

**불변식**
- User는 고유한 식별자를 가진다.
- User는 유효한 인증 정보를 가진다.

---

### 5.2 Todo

**책임**
- 작업 제목과 설명 관리
- 완료 상태 관리
- 마감일 기준 기한 경과 판단
- 생성 및 수정 이력 기록

**불변식**
- Todo는 반드시 소유자(UserId)를 가진다.
- Todo는 반드시 제목을 가진다.
- Todo는 명확한 완료 상태를 가진다.

---

## 6. 비즈니스 규칙 (Business Rules)

### BR-001: 회원 가입 개방
누구나 회원으로 등록할 수 있다.

### BR-002: 인증 필수
인증된 사용자만 Todo를 관리할 수 있다.

### BR-003: 소유권 기반 접근
사용자는 자신의 Todo만 조회, 수정, 삭제할 수 있다.

### BR-004: Todo 생성
- 제목은 필수이다.
- 생성 시 상태는 Incomplete이다.

### BR-005: Todo 수정
- 제목, 설명, 마감일은 수정 가능하다.
- 수정 시점은 기록된다.

### BR-006: Todo 삭제
- 삭제된 Todo는 복구할 수 없다.

### BR-007: 완료 처리
- Incomplete ↔ Completed 전환이 가능하다.

### BR-008: 마감일 선택성
마감일은 선택 사항이다.

### BR-009: 기한 경과 판단
- 현재 날짜 > 마감일 AND 상태 = Incomplete → Overdue
- Completed 상태는 Overdue로 간주하지 않는다.

### BR-010: 기한 경과 표시
Overdue Todo는 시각적으로 명확히 구분되어야 한다.

---

## 7. 상태 모델

### 7.1 허용 상태
- Incomplete
- Completed
- Overdue (파생 상태)

### 7.2 불허 상태
- 소유자 없는 Todo
- 제목 없는 Todo
- 정의되지 않은 상태

---

### 7.3 상태 전이

- 생성 → Incomplete (자동)
- Incomplete ↔ Completed (사용자 명령)
- 생성 → Completed 직접 전이 불가

---

## 8. macOS Todo 수준을 위한 도메인 보완

### 8.1 시간 흐름 기반 인지
Todo는 상태뿐 아니라 **시간 흐름 관점에서 인지**되어야 한다.
- 오늘 해야 할 일
- 예정된 할 일
- 이미 늦은 할 일

이는 UI가 자연스럽게 그룹화되도록 강제한다.

---

### 8.2 인지 우선 설계
도메인의 목적은 "많이 관리"가 아니라
**"지금 무엇을 해야 하는지 즉시 알게 하는 것"**이다.

---

## 9. 검증 가능 기준 (Test View)

- 인증되지 않은 사용자는 Todo 생성 불가
- 제목 없는 Todo 생성 불가
- 마감일 경과 + 미완료 → Overdue
- Completed Todo는 Overdue 아님
- 다른 사용자의 Todo 접근 불가

---

## 10. 유지보수 및 확장 포인트

- 협업 기능 추가 시 새로운 Aggregate 필요
- 반복 일정은 Todo 확장이 아닌 별도 모델 필요
- 알림 기능은 도메인 이벤트 기반 확장 가능

---

## 11. 기술 스택 : 프론트엔드, 백엔드, 데이터베이스의 3-티어 구조의 애플리케이션

- 프론트엔드 프레임워크는? React 19 + Typescript
- 백엔드 기술 스택은? Node.js/Express + pg(PostgreSQL DB연동 라이브러리, 절대 Prisma 사용하지말것)
- 데이터베이스는? PostgreSQL 17
- 배포환경은? vercel
- 알림 기능은 도메인 이벤트 기반 확장 가능

---

## 12. 사용자 및 페르소나
- 주요 타겟 사용자는? 일반인 모두
- 주요 사용 디바이스는? 데스크탑 또는 모바일
- 모바일 환경 지원이 필수인가요? 필수, 반응형 UI 지원해야 함
- 최대 사용자수는? 대략 100명이하로 시작해서 3개월마다 2배씩 증량


---

## [추가] 13. MVP 수준 TodoList를 위한 최소 도메인 보완

본 섹션은 macOS 수준의 복잡한 구조를 도입하지 않고,  
**간단한 개인용 TodoList를 안정적으로 구현하기 위한 최소 보완 규칙**을 정의한다.

---

## 13.1 기본 리스트(Default List) 개념

### 도메인 의도
초기 버전에서는 복수의 리스트를 지원하지 않지만,  
모든 Todo는 **논리적으로 하나의 기본 리스트(Default List)** 에 속한다고 간주한다.

이는 향후 리스트 기능 확장을 대비한 **도메인 여지 확보 목적**이다.

---

### 도메인 규칙

**BR-011: 기본 리스트 존재**
- 모든 사용자는 하나의 기본 TodoList를 가진다.
- 초기 버전에서는 사용자가 리스트를 직접 생성하거나 관리하지 않는다.

**BR-012: Todo의 리스트 소속**
- 모든 Todo는 기본 리스트에 속한다.
- Todo는 리스트 없이 단독으로 존재할 수 없다.

---

## 13.2 시간 기준 및 마감일 해석 규칙

### 도메인 의도
MVP 단계에서는 **과도한 시간 복잡도를 피하고**,  
사용자가 직관적으로 이해할 수 있는 기준을 우선한다.

---

### 도메인 규칙

**BR-013: 마감일 해상도**
- 마감일(Due Date)은 **날짜 단위(YYYY-MM-DD)** 로만 관리한다.
- 시간(HH:mm)은 고려하지 않는다.

**BR-014: 현재 날짜 기준**
- 모든 마감일 비교는 **사용자 로컬 날짜 기준**으로 판단한다.

---

## 13.3 Todo 분류 기준 (UI를 위한 도메인 규칙)

### 도메인 의도
UI에서 자연스럽게 Todo가 구분되도록  
도메인 차원에서 **분류 기준을 명확히 정의**한다.

---

### 도메인 규칙

**BR-015: 오늘 할 일 (Today)**
- 마감일이 오늘인 Todo
- 상태가 Incomplete인 경우에만 해당

**BR-016: 예정된 할 일 (Upcoming)**
- 마감일이 오늘 이후인 Todo
- 상태가 Incomplete인 경우

**BR-017: 기한 경과 (Overdue)**
- 마감일이 오늘 이전이고
- 상태가 Incomplete인 Todo

**BR-018: 마감일 없는 할 일**
- 마감일이 없는 Todo는
  - Overdue로 간주하지 않는다
  - 일반 Incomplete Todo로 취급한다

---

## 13.4 기본 정렬 규칙 (MVP 기준)

### 도메인 의도
사용자가 별도 설정 없이도  
**지금 가장 중요한 Todo부터 인지**할 수 있도록 한다.

---

### 도메인 규칙

**BR-019: 기본 정렬 우선순위**
Todo 목록은 다음 순서로 정렬된다.

1. Overdue Todo
2. 마감일이 가장 빠른 Todo
3. 마감일이 없는 Todo
4. 생성 시점이 빠른 Todo

---

## 13.5 완료 Todo 표시 정책

### 도메인 의도
완료된 할 일은 중요도가 낮아지므로  
기본적으로 사용자의 주의를 방해하지 않도록 한다.

---

### 도메인 규칙

**BR-020: 완료 Todo 기본 정책**
- Completed 상태의 Todo는 기본 목록에서 분리하여 표시한다.
- Completed Todo는 별도 영역에서 조회 가능하다.
- Completed Todo도 수정 및 삭제는 가능하다.

---

## 13.6 검증 가능 기준 보강 (Test View 확장)

다음 항목은 자동 테스트 또는 수동 검증이 가능해야 한다.

- 모든 Todo는 기본 리스트에 속한다
- 마감일은 날짜 단위로만 처리된다
- 마감일이 오늘 이전 + Incomplete → Overdue
- 마감일 없는 Todo는 Overdue가 아니다
- Overdue Todo는 목록 상단에 노출된다
- Completed Todo는 기본 목록에서 분리되어 표시된다

---



