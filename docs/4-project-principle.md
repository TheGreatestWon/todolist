# 프로젝트 구조 설계 원칙

**문서 버전:** 1.0  
**작성일:** 2026-02-11  
**프로젝트:** 개인 할 일 관리 시스템

## 1. 개요

이 문서는 개인 할 일 관리 시스템 아키텍처의 설계 및 구현을 안내하는 기본 원칙들을 설명합니다. 이러한 원칙들은 PRD에 정의된 프로젝트의 핵심 목표와 일치하는 일관된 개발 관행, 유지보수 가능한 코드를 보장합니다.

## 2. 핵심 아키텍처 원칙

### 2.1 관심사 분리
- **원칙:** 프레젠테이션, 비즈니스 로직, 데이터 계층 사이에 명확한 경계 유지
- **적용:**
  - 프론트엔드(React)는 UI 렌더링 및 사용자 상호작용 처리
  - 백엔드(Express)는 비즈니스 로직 및 API 엔드포인트 관리
  - 데이터베이스(PostgreSQL)는 데이터 저장 및 검색
- **이점:** 각 계층의 독립적인 개발, 테스트, 확장을 가능하게 함

### 2.2 깨끗한 계층화 아키텍처
- **원칙:** 코드를 명확하게 정의된 별개의 계층으로 구성
- **적용:**
  - 프레젠테이션 계층: React 컴포넌트 및 UI 로직
  - 비즈니스 로직 계층: Express 컨트롤러, 서비스, 검증
  - 데이터 액세스 계층: PostgreSQL 쿼리 및 데이터베이스 작업
- **이점:** 유지보수성을 향상시키고 구성 요소 간 결합도를 줄임

### 2.3 도메인 주도 설계(DDD) 접근
- **원칙:** 핵심 도메인 개념(User, Todo)을 중심으로 시스템 모델링
- **적용:**
  - PRD 도메인 개념에 기반한 명확한 엔티티 및 집합체 정의
  - 비즈니스 요구사항에 명시된 도메인 규칙 구현
  - PRD 용어와 일관된 보편적 언어 사용
- **이점:** 코드베이스가 비즈니스 도메인을 정확하게 반영하도록 보장

## 3. 기술 스택 원칙

### 3.1 최소한의 의존성
- **원칙:** 필수 라이브러리 및 프레임워크만 사용
- **적용:**
  - 데이터베이스 작업을 위해 Prisma 대신 직접 `pg` 라이브러리 사용
  - 상태 관리를 위해 React 훅과 컨텍스트 활용
  - 번들 크기 축소를 위해 최소한의 유틸리티 라이브러리 사용
- **이점:** 복잡성, 보안 취약점, 유지보수 오버헤드 감소

### 3.2 일관된 언어 선택
- **원칙:** 타입 안전성과 향상된 개발자 경험을 위해 TypeScript 사용
- **적용:**
  - 프론트엔드 및 백엔드 모두 엄격한 TypeScript 설정 구현
  - 모든 API 계약을 위한 포괄적인 타입 정의
  - 모든 도메인 엔티티 및 DTO를 위한 인터페이스 사용
- **이점:** 컴파일 타임에 오류를 포착하고 코드 문서화 향상

### 3.3 표준화된 인증
- **원칙:** JWT 기반 인증을 일관되게 구현
- **적용:**
  - 인증된 모든 API 요청에 JWT 토큰 사용
  - 토큰 검증을 위한 미들웨어 구현
  - 브라우저 저장소에 토큰을 안전하게 저장
- **이점:** 무상태, 확장 가능한 인증 메커니즘 제공

## 4. 데이터 관리 원칙

### 4.1 데이터 무결성 및 검증
- **원칙:** 모든 진입점에서 데이터를 검증하고 일관성 유지
- **적용:**
  - 모든 API 입력에 대해 서버 사이드 검증 구현
  - 데이터 무결성 강제를 위한 데이터베이스 제약 조건 사용
  - PRD(BR-001부터 BR-013)에 정의된 비즈니스 규칙 검증
- **이점:** 잘못된 데이터가 시스템을 손상시키는 것을 방지

### 4.2 사용자 데이터 격리
- **원칙:** 사용자 데이터 액세스 경계를 엄격하게 시행
- **적용:**
  - 무단 액세스를 방지하기 위해 모든 쿼리에 user_id 포함
  - 보호된 엔드포인트에서 인가 검사 구현
  - 소유권 시행을 위한 데이터베이스 수준 제약 조건 사용
- **이점:** 사용자 데이터의 개인정보 보호 및 보안 보장

### 4.3 효율적인 데이터 검색
- **원칙:** 성능을 위해 쿼리 최적화 및 데이터 전송 최소화
- **적용:**
  - 자주 쿼리되는 열에 적절한 인덱스 생성
  - 대규모 데이터셋을 위한 페이지네이션 구현
  - 데이터베이스 쿼리에서 필요한 필드만 선택
- **이점:** 애플리케이션 성능 및 사용자 경험 향상

## 5. API 설계 원칙

### 5.1 RESTful API 설계
- **원칙:** API 엔드포인트에 REST 규칙 준수
- **적용:**
  - 표준 HTTP 메서드 사용(GET, POST, PUT, DELETE)
  - 일관된 URL 패턴 구현(`/api/todos`, `/api/auth`)
  - 적절한 HTTP 상태 코드 반환
- **이점:** 예측 가능하고 이해하기 쉬운 API 인터페이스 생성

### 5.2 일관된 오류 처리
- **원칙:** 표준화된 방식으로 오류를 처리하고 전달
- **적용:**
  - 일관된 오류 응답 형식 반환
  - 적절한 HTTP 상태 코드 사용(400, 401, 403, 404, 500)
  - 디버깅을 위한 의미 있는 오류 메시지 제공
- **이점:** 클라이언트 측 오류 처리 및 디버깅 간소화

### 5.3 API 보안
- **원칙:** 모든 API 엔드포인트를 적절하게 보안
- **적용:**
  - 보호된 경로를 위한 인증 미들웨어 구현
  - 인젝션 공격 방지를 위한 입력 정제
  - 운영 환경에서 HTTPS 사용
- **이점:** 일반적인 보안 취약점으로부터 보호

## 6. 프론트엔드 개발 원칙

### 6.1 컴포넌트 기반 아키텍처
- **원칙:** 재사용 가능하고 모듈화된 컴포넌트를 사용하여 UI 구축
- **적용:**
  - UI 요소를 위한 원자 컴포넌트 생성
  - 복잡한 UI 섹션을 위한 복합 컴포넌트 구축
  - 일관된 컴포넌트 인터페이스 유지
- **이점:** 코드 재사용성 및 유지보수성 향상

### 6.2 반응형 디자인
- **원칙:** 모든 장치 크기에서 애플리케이션이 작동하도록 보장
- **적용:**
  - CSS 미디어 쿼리를 사용한 반응형 레이아웃 구현
  - 모바일 장치를 위한 터치 친화적 인터페이스 설계
  - 다양한 화면 크기 및 브라우저에서 테스트
- **이점:** 장치 간 일관된 사용자 경험 제공

### 6.3 상태 관리
- **원칙:** 예측 가능하고 효율적으로 애플리케이션 상태 관리
- **적용:**
  - 전역 상태 관리를 위한 React Context 사용
  - UI 관련 데이터를 위한 로컬 컴포넌트 상태 구현
  - 서버 데이터와 적절하게 UI 상태 동기화
- **이점:** 일관된 애플리케이션 상태 및 사용자 경험 유지

## 7. 보안 원칙

### 7.1 다중 보안
- **원칙:** 여러 보안 제어 계층 구현
- **적용:**
  - 클라이언트 및 서버 수준에서 입력 검증
  - bcrypt를 사용한 비밀번호 암호화
  - 남용 방지를 위한 속도 제한 구현
- **이점:** 성공적인 공격 위험 감소

### 7.2 최소 권한 원칙
- **원칙:** 필요한 최소 권한만 부여
- **적용:**
  - 데이터베이스 사용자는 필요한 권한만 보유
  - API 엔드포인트는 사용자 역할에 따라 액세스 제한
  - 프론트엔드는 필요한 데이터만 요청
- **이점:** 보안 위반으로 인한 잠재적 피해 제한

### 7.3 보안 구성
- **원칙:** 민감한 구성 데이터 보호
- **적용:**
  - 환경 변수에 시크릿 저장
  - 자격 증명을 버전 관리에 커밋하지 않음
  - 모든 구성에 대해 보안 기본값 사용
- **이점:** 민감한 정보의 실수 노출 방지

## 8. 성능 원칙

### 8.1 낙관적 업데이트
- **원칙:** UI를 즉시 업데이트한 후 서버 응답 처리
- **적용:**
  - 사용자 작업에 즉시 UI 상태 업데이트
  - 서버 작업 실패 시 변경 사항 되돌리기
  - 비동기 작업 중 로딩 상태 표시
- **이점:** 반응형 사용자 경험 제공

### 8.2 효율적인 리소스 사용
- **원칙:** 리소스 소비 최소화
- **적용:**
  - 빠른 로딩을 위한 번들 크기 최적화
  - 정렬 및 필터링을 위한 효율적인 알고리즘 구현
  - 비필수 리소스를 위한 지연 로딩 사용
- **이점:** 애플리케이션 성능 및 사용자 만족도 향상

## 9. 테스트 원칙

### 9.1 포괄적인 테스트 커버리지
- **원칙:** 모든 핵심 기능 테스트
- **적용:**
  - 비즈니스 로직을 위한 단위 테스트 구현
  - API 엔드포인트를 위한 통합 테스트 생성
  - 사용자 흐름을 위한 수동 엔드투엔드 테스트 수행
- **이점:** 신뢰성 보장 및 회귀 테스트 포착

### 9.2 테스트 주도 개발(TDD) 접근
- **원칙:** 기능 구현 전 테스트 작성
- **적용:**
  - 수용 기준(AC-XXX)에 기반한 테스트 생성
  - 기능이 PRD 요구사항을 충족하는지 검증
  - 테스트 가능성 향상을 위한 코드 리팩토링
- **이점:** 처음부터 기능이 사양을 충족하도록 보장

## 10. 배포 및 운영 원칙

### 10.1 환경 일관성
- **원칙:** 개발, 스테이징, 운영 환경 간 일관된 환경 유지
- **적용:**
  - 구성 차이를 위한 환경 변수 사용
  - 자동 배포를 위한 CI/CD 파이프라인 구현
  - 환경 간 유사한 인프라 유지
- **이점:** 배포 문제 및 환경별 버그 감소

### 10.2 모니터링 및 관찰 가능성
- **원칙:** 운영 인사이트를 위한 로깅 및 모니터링 구현
- **적용:**
  - 중요한 애플리케이션 이벤트 및 오류 로깅
  - API 응답 시간 및 오류율 모니터링
  - 사용자 활동 및 기능 사용 추적
- **이점:** 선제적 문제 감지 및 해결 가능

## 11. 문서화 원칙

### 11.1 자기 문서화 코드
- **원칙:** 목적을 설명하는 코드 작성
- **적용:**
  - 의미 있는 변수 및 함수 이름 사용
  - 복잡한 로직을 위한 명확한 주석 작성
  - 일관된 명명 규칙 따르기
- **이점:** 코드 가독성 및 유지보수성 향상

### 11.2 생동하는 문서
- **원칙:** 코드와 동기화된 문서 유지
- **적용:**
  - 기능 변경 시 문서 업데이트
  - 예제 및 사용 패턴 포함
  - 요청/응답 예제와 함께 API 엔드포인트 문서화
- **이점:** 문서가 정확하고 유용하게 유지됨

## 12. 프로젝트 디렉토리 구조

### 12.1 프론트엔드 디렉토리 구조
```
frontend/
├── public/
│   ├── index.html
│   └── favicon.ico
├── src/
│   ├── components/
│   │   ├── common/
│   │   │   ├── Header.tsx
│   │   │   ├── Footer.tsx
│   │   │   └── Button.tsx
│   │   ├── auth/
│   │   │   ├── Login.tsx
│   │   │   └── Register.tsx
│   │   └── todo/
│   │       ├── TodoList.tsx
│   │       ├── TodoItem.tsx
│   │       └── TodoForm.tsx
│   ├── pages/
│   │   ├── LoginPage.tsx
│   │   ├── RegisterPage.tsx
│   │   └── TodoPage.tsx
│   ├── hooks/
│   │   ├── useAuth.ts
│   │   └── useTodos.ts
│   ├── services/
│   │   ├── api.ts
│   │   └── authService.ts
│   ├── types/
│   │   ├── User.ts
│   │   └── Todo.ts
│   ├── utils/
│   │   ├── dateUtils.ts
│   │   └── validation.ts
│   ├── styles/
│   │   └── globals.css
│   ├── contexts/
│   │   └── AuthContext.tsx
│   ├── App.tsx
│   └── index.tsx
├── package.json
├── tsconfig.json
└── .env
```

### 12.2 백엔드 디렉토리 구조
```
backend/
├── src/
│   ├── controllers/
│   │   ├── authController.ts
│   │   └── todoController.ts
│   ├── routes/
│   │   ├── authRoutes.ts
│   │   └── todoRoutes.ts
│   ├── middleware/
│   │   ├── authMiddleware.ts
│   │   ├── validationMiddleware.ts
│   │   └── errorHandler.ts
│   ├── models/
│   │   ├── User.ts
│   │   └── Todo.ts
│   ├── services/
│   │   ├── authService.ts
│   │   └── todoService.ts
│   ├── utils/
│   │   ├── hashPassword.ts
│   │   ├── jwtUtils.ts
│   │   └── dateUtils.ts
│   ├── config/
│   │   ├── database.ts
│   │   └── env.ts
│   ├── types/
│   │   ├── User.ts
│   │   └── Todo.ts
│   ├── validations/
│   │   ├── authValidation.ts
│   │   └── todoValidation.ts
│   ├── app.ts
│   └── server.ts
├── migrations/
│   └── 001-initial-schema.sql
├── tests/
│   ├── unit/
│   ├── integration/
│   └── fixtures/
├── package.json
├── tsconfig.json
├── .env
└── Dockerfile
```

### 12.3 전체 프로젝트 구조
```
todolist/
├── docs/
│   ├── 1-domain-definition.md
│   ├── 2-PRD.md
│   ├── 3-user-scenario.md
│   └── 4-project-principle.md
├── frontend/
│   ├── public/
│   ├── src/
│   ├── package.json
│   └── ...
├── backend/
│   ├── src/
│   ├── migrations/
│   ├── tests/
│   ├── package.json
│   └── ...
├── database/
│   ├── schema.sql
│   └── seeds/
├── docker-compose.yml
├── README.md
├── .gitignore
└── .env.example
```

## 13. 코드 품질 원칙

### 13.1 코드 스타일 및 포맷팅
- **원칙:** 일관된 코드 스타일을 유지하여 가독성 향상
- **적용:**
  - ESLint 및 Prettier 설정으로 코드 스타일 자동화
  - Airbnb JavaScript 스타일 가이드 준수
  - TypeScript의 엄격한 모드 사용
- **이점:** 팀원 간 코드 스타일 일관성 유지

### 13.2 코드 리뷰 원칙
- **원칙:** 모든 코드 변경 사항은 리뷰를 거쳐야 함
- **적용:**
  - 최소 1명 이상의 팀원 검토 필요
  - 코드 품질, 보안, 성능 고려
  - PR 템플릿 사용하여 변경 사항 명확화
- **이점:** 코드 품질 향상 및 지식 공유 촉진

### 13.3 커밋 메시지 규칙
- **원칙:** 명확하고 일관된 커밋 메시지 작성
- **적용:**
  - Gitmoji 또는 Conventional Commits 규칙 사용
  - 변경 사항 요약 및 상세 설명 포함
  - PR 번호 참조 포함 (예: `feat: 사용자 인증 기능 구현 (#12)`)
- **이점:** 변경 이력 추적 용이

## 14. 배포 및 CI/CD 원칙

### 14.1 자동화된 테스트
- **원칙:** 배포 전 모든 테스트 통과 필수
- **적용:**
  - 유닛 테스트, 통합 테스트, E2E 테스트 실행
  - 코드 커버리지 80% 이상 유지
  - 보안 스캐닝 통합
- **이점:** 결함 조기에 발견 및 배포 안정성 확보

### 14.2 환경 분리
- **원칙:** 개발, 스테이징, 운영 환경 분리
- **적용:**
  - 각 환경별 독립된 데이터베이스 사용
  - 환경 변수를 통한 설정 관리
  - 블루-그린 배포 또는 롤링 업데이트 전략 사용
- **이점:** 운영 환경 안정성 보장

## 15. 결론

이 원칙들은 개인 할 일 관리 시스템 개발 전반에 걸친 모든 기술 결정의 기반이 됩니다. 이러한 원칙을 준수함으로써 PRD에 명시된 요구사항을 충족하면서 향후 개선 사항을 지원하는 일관되고 유지보수 가능하며 확장 가능한 솔루션을 보장합니다.

모든 팀원은 프로젝트 전반에 걸쳐 일관성을 유지하기 위해 아키텍처 및 구현 결정을 내릴 때 이 원칙들을 참고해야 합니다.